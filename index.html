<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SamdGame | –ò—Ç–æ–≥–∏ 2 –°–µ–∑–æ–Ω–∞</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --dark-bg: #0a0e17;
            --dark-card: #111827;
            --primary-blue: #0066ff;
            --neon-blue: #00d4ff;
            --accent-blue: #3b82f6;
            --text-light: #f8fafc;
            --text-gray: #94a3b8;
            --gold: #ffd700;
            --silver: #c0c0c0;
            --bronze: #cd7f32;
            --transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body {
            background-color: var(--dark-bg);
            color: var(--text-light);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* –ù–æ–≤–æ–≥–æ–¥–Ω–∏–π —Å—Ç–∏–ª—å */
        .new-year-theme {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
            position: relative;
            overflow: hidden;
        }

        .new-year-theme::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 10% 20%, rgba(255, 0, 0, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 40%, rgba(0, 255, 0, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 50% 80%, rgba(255, 255, 0, 0.1) 0%, transparent 20%);
            pointer-events: none;
        }

        .snowflake {
            position: absolute;
            background: white;
            border-radius: 50%;
            opacity: 0.8;
            animation: fall linear infinite;
        }

        @keyframes fall {
            to {
                transform: translateY(100vh);
            }
        }

        .christmas-ball {
            position: absolute;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        /* –û–±—â–∏–µ —Å—Ç–∏–ª–∏ */
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
            z-index: 1;
        }

        .hidden {
            display: none !important;
        }

        .slide {
            background: rgba(17, 24, 39, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 24px;
            padding: 40px 30px;
            margin: 20px 0;
            border: 1px solid rgba(59, 130, 246, 0.2);
            box-shadow: 0 10px 40px rgba(0, 102, 255, 0.15);
            animation: slideIn 0.8s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1, h2, h3 {
            background: linear-gradient(135deg, var(--primary-blue), var(--neon-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            text-align: center;
        }

        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
        }

        h2 {
            font-size: 2.2rem;
            margin-bottom: 30px;
        }

        h3 {
            font-size: 1.8rem;
            margin-bottom: 20px;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: rgba(30, 41, 59, 0.7);
            border-radius: 16px;
            padding: 25px;
            text-align: center;
            border: 1px solid rgba(59, 130, 246, 0.3);
            transition: var(--transition);
        }

        .stat-card:hover {
            transform: translateY(-5px);
            border-color: var(--neon-blue);
            box-shadow: 0 5px 20px rgba(0, 212, 255, 0.3);
        }

        .stat-value {
            font-size: 3rem;
            font-weight: bold;
            margin: 15px 0;
            color: var(--neon-blue);
        }

        .stat-label {
            color: var(--text-gray);
            font-size: 1.1rem;
        }

        .coin-icon {
            color: var(--gold);
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .ticket-icon {
            color: var(--silver);
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .nft-icon {
            color: var(--bronze);
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .nft-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .nft-item {
            background: rgba(30, 41, 59, 0.7);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 2px solid transparent;
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .nft-item:hover {
            border-color: var(--bronze);
            transform: scale(1.05);
        }

        .nft-image {
            width: 100px;
            height: 100px;
            border-radius: 10px;
            margin-bottom: 15px;
            object-fit: cover;
            border: 2px solid rgba(255, 215, 0, 0.3);
        }

        .nft-rarity {
            font-size: 0.9rem;
            padding: 4px 12px;
            border-radius: 20px;
            margin-top: 8px;
            font-weight: bold;
        }

        .rarity-legendary {
            background: linear-gradient(135deg, #ffd700, #ff9800);
            color: #000;
        }

        .rarity-epic {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            color: white;
        }

        .rarity-rare {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }

        .rarity-common {
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
            color: white;
        }

        .button {
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-blue));
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
            display: block;
            margin: 30px auto;
            min-width: 250px;
            text-align: center;
            text-decoration: none;
            box-shadow: 0 5px 20px rgba(0, 102, 255, 0.3);
        }

        .button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 102, 255, 0.4);
            background: linear-gradient(135deg, var(--accent-blue), var(--primary-blue));
        }

        .button:active {
            transform: translateY(-1px);
        }

        .button-secondary {
            background: transparent;
            border: 2px solid var(--primary-blue);
            color: var(--primary-blue);
        }

        .button-secondary:hover {
            background: rgba(0, 102, 255, 0.1);
        }

        .countdown {
            text-align: center;
            margin: 40px 0;
        }

        .countdown-title {
            font-size: 2rem;
            margin-bottom: 30px;
            color: #ff4757;
        }

        .countdown-timer {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
        }

        .countdown-unit {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            min-width: 100px;
            backdrop-filter: blur(10px);
        }

        .countdown-value {
            font-size: 3rem;
            font-weight: bold;
            color: #ff6b81;
        }

        .countdown-label {
            font-size: 1rem;
            color: var(--text-gray);
            margin-top: 10px;
        }

        .completion-screen {
            text-align: center;
            padding: 60px 20px;
        }

        .completion-icon {
            font-size: 6rem;
            color: var(--neon-blue);
            margin-bottom: 30px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        .season-complete {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .progress-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            margin: 30px 0;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-blue), var(--neon-blue));
            border-radius: 4px;
            width: 0%;
            transition: width 1s ease-in-out;
        }

        .slide-counter {
            text-align: center;
            color: var(--text-gray);
            margin-top: 20px;
        }

        .fireworks {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .tree-icon {
            font-size: 4rem;
            color: #2ecc71;
            margin: 20px 0;
        }

        .gift-icon {
            font-size: 4rem;
            color: #e74c3c;
            margin: 20px 0;
        }

        .season-badge {
            display: inline-block;
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            color: #333;
            padding: 10px 25px;
            border-radius: 50px;
            font-weight: bold;
            margin: 20px 0;
            font-size: 1.2rem;
        }

        .telegram-button {
            background: #0088cc;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 20px auto;
            transition: var(--transition);
        }

        .telegram-button:hover {
            background: #0077b5;
            transform: translateY(-2px);
        }

        .loading {
            text-align: center;
            padding: 100px 20px;
        }

        .spinner {
            width: 60px;
            height: 60px;
            border: 5px solid rgba(59, 130, 246, 0.3);
            border-top-color: var(--primary-blue);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 30px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .error-message {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            color: #ef4444;
        }

        .user-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin: 0 auto 20px;
            border: 3px solid var(--primary-blue);
            object-fit: cover;
        }

        .rank-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-weight: bold;
            font-size: 1.2rem;
            margin: 10px;
        }

        .rank-1 {
            background: linear-gradient(135deg, #ffd700, #ff9800);
            color: #000;
        }

        .rank-2 {
            background: linear-gradient(135deg, #c0c0c0, #a0a0a0);
            color: #000;
        }

        .rank-3 {
            background: linear-gradient(135deg, #cd7f32, #b56c28);
            color: #000;
        }

        .rank-other {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
        }
    </style>
</head>
<body class="dark-theme">
    <!-- –°–Ω–µ–∂–∏–Ω–∫–∏ –∏ —É–∫—Ä–∞—à–µ–Ω–∏—è –¥–ª—è –Ω–æ–≤–æ–≥–æ–¥–Ω–µ–π —Ç–µ–º—ã -->
    <div id="snowflakes"></div>
    <div id="christmasBalls"></div>

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
    <div class="container">
        <!-- –≠–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ -->
        <div id="loadingScreen" class="loading">
            <div class="spinner"></div>
            <h2>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</h2>
            <p>–ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö</p>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –æ—à–∏–±–∫–∏ -->
        <div id="errorScreen" class="slide hidden">
            <div class="completion-screen">
                <div class="completion-icon" style="color: #ef4444;">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <h1 style="color: #ef4444;">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</h1>
                <p style="font-size: 1.2rem; margin: 20px 0 40px; color: var(--text-gray); max-width: 600px; line-height: 1.6;">
                    –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.<br>
                    –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.
                </p>
                <button id="retryButton" class="button">
                    <i class="fas fa-redo"></i> –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞
                </button>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–µ–∑–æ–Ω–∞ -->
        <div id="seasonCompleteScreen" class="slide hidden">
            <div class="completion-screen">
                <div class="completion-icon">
                    <i class="fas fa-trophy"></i>
                </div>
                <h1 class="season-complete">1 –°–ï–ó–û–ù –ó–ê–í–ï–†–®–ï–ù!</h1>
                <h2>–ü—Ä–∏–≥–æ—Ç–æ–≤—å—Ç–µ—Å—å –∫ –Ω–æ–≤—ã–º –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è–º!</h2>
                <p style="font-size: 1.2rem; margin: 20px 0; color: var(--text-gray);">
                    –°–µ–∑–æ–Ω 1 –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω. –ù–∞—Å—Ç–∞–ª–æ –≤—Ä–µ–º—è –ø–æ–¥–≤–µ—Å—Ç–∏ –∏—Ç–æ–≥–∏ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫–æ 2 —Å–µ–∑–æ–Ω—É!
                </p>
                <button id="viewResultsBtn" class="button">
                    <i class="fas fa-chart-bar"></i> –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Ç–æ–≥–∏
                </button>
            </div>
        </div>

        <!-- –°–ª–∞–π–¥—ã —Å –∏—Ç–æ–≥–∞–º–∏ -->
        <div id="resultsSlides" class="hidden">
            <!-- –°–ª–∞–π–¥ 1: –í–≤–µ–¥–µ–Ω–∏–µ -->
            <div id="slide1" class="slide">
                <div style="text-align: center; margin-bottom: 30px;">
                    <img id="userAvatar" class="user-avatar" src="" alt="–ê–≤–∞—Ç–∞—Ä">
                    <h2 id="userName">–ò–≥—Ä–æ–∫</h2>
                    <p style="color: var(--text-gray);">–£—á–∞—Å—Ç–Ω–∏–∫ 1 —Å–µ–∑–æ–Ω–∞ SamdGame</p>
                </div>
                
                <h2>üéÆ –ò—Ç–æ–≥–∏ 1 –°–µ–∑–æ–Ω–∞ SamdGame</h2>
                <div style="text-align: center; margin: 30px 0;">
                    <i class="fas fa-gamepad" style="font-size: 4rem; color: var(--neon-blue); margin-bottom: 20px;"></i>
                    <p style="font-size: 1.2rem; line-height: 1.6; color: var(--text-gray);">
                        –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∏—Å—Ç–æ—Ä–∏—é –≤–∞—à–∏—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π!<br>
                        –î–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫–∏—Ö –≤—ã—Å–æ—Ç –≤—ã –¥–æ—Å—Ç–∏–≥–ª–∏ –≤ –ø–µ—Ä–≤–æ–º —Å–µ–∑–æ–Ω–µ.
                    </p>
                </div>
                <div class="progress-bar">
                    <div id="resultsProgress" class="progress" style="width: 14%"></div>
                </div>
                <div class="slide-counter">1/7</div>
            </div>

            <!-- –°–ª–∞–π–¥ 2: –°–∞–º–¥–∫–æ–∏–Ω—ã -->
            <div id="slide2" class="slide hidden">
                <h2>üí∞ –í–∞—à–∏ –°–∞–º–¥–∫–æ–∏–Ω—ã</h2>
                <div class="stats-container">
                    <div class="stat-card">
                        <div class="coin-icon">
                            <i class="fas fa-coins"></i>
                        </div>
                        <div class="stat-value" id="userCoins">0</div>
                        <div class="stat-label">–í–∞—à–∏ –°–∞–º–¥–∫–æ–∏–Ω—ã</div>
                        <p style="margin-top: 15px; font-size: 0.9rem; color: var(--text-gray);">
                            –ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ –≤ 1 —Å–µ–∑–æ–Ω–µ
                        </p>
                    </div>
                    <div class="stat-card">
                        <div class="coin-icon">
                            <i class="fas fa-globe"></i>
                        </div>
                        <div class="stat-value" id="globalCoins">0</div>
                        <div class="stat-label">–í—Å–µ–≥–æ —É –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤</div>
                        <p style="margin-top: 15px; font-size: 0.9rem; color: var(--text-gray);">
                            –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤ –∏–≥—Ä–µ
                        </p>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress" style="width: 28%"></div>
                </div>
                <div class="slide-counter">2/7</div>
            </div>

            <!-- –°–ª–∞–π–¥ 3: –¢–∏–∫–µ—Ç—ã -->
            <div id="slide3" class="slide hidden">
                <h2>üé´ –í–∞—à–∏ –¢–∏–∫–µ—Ç—ã</h2>
                <div class="stats-container">
                    <div class="stat-card">
                        <div class="ticket-icon">
                            <i class="fas fa-ticket-alt"></i>
                        </div>
                        <div class="stat-value" id="userTickets">0</div>
                        <div class="stat-label">–í–∞—à–∏ –¢–∏–∫–µ—Ç—ã</div>
                        <p style="margin-top: 15px; font-size: 0.9rem; color: var(--text-gray);">
                            –ü–æ–ª—É—á–µ–Ω–æ –≤ 1 —Å–µ–∑–æ–Ω–µ
                        </p>
                    </div>
                    <div class="stat-card">
                        <div class="ticket-icon">
                            <i class="fas fa-globe"></i>
                        </div>
                        <div class="stat-value" id="globalTickets">0</div>
                        <div class="stat-label">–í—Å–µ–≥–æ —É –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤</div>
                        <p style="margin-top: 15px; font-size: 0.9rem; color: var(--text-gray);">
                            –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤ –∏–≥—Ä–µ
                        </p>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress" style="width: 42%"></div>
                </div>
                <div class="slide-counter">3/7</div>
            </div>

            <!-- –°–ª–∞–π–¥ 4: NFT -->
            <div id="slide4" class="slide hidden">
                <h2>üèÜ –í–∞—à–∏ NFT –ö–æ–ª–ª–µ–∫—Ü–∏–∏</h2>
                <div class="stats-container">
                    <div class="stat-card">
                        <div class="nft-icon">
                            <i class="fas fa-gem"></i>
                        </div>
                        <div class="stat-value" id="userNFTsCount">0</div>
                        <div class="stat-label">–í–∞—à–∏ NFT</div>
                        <p style="margin-top: 15px; font-size: 0.9rem; color: var(--text-gray);">
                            –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã
                        </p>
                    </div>
                    <div class="stat-card">
                        <div class="nft-icon">
                            <i class="fas fa-globe"></i>
                        </div>
                        <div class="stat-value" id="globalNFTsCount">0</div>
                        <div class="stat-label">–í—Å–µ–≥–æ —É –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤</div>
                        <p style="margin-top: 15px; font-size: 0.9rem; color: var(--text-gray);">
                            –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ NFT
                        </p>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress" style="width: 57%"></div>
                </div>
                <div class="slide-counter">4/7</div>
            </div>

            <!-- –°–ª–∞–π–¥ 5: –î–µ—Ç–∞–ª–∏ NFT -->
            <div id="slide5" class="slide hidden">
                <h2>üé® –í–∞—à–∞ –ö–æ–ª–ª–µ–∫—Ü–∏—è NFT</h2>
                <div id="nftGrid" class="nft-grid">
                    <!-- NFT –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö -->
                </div>
                <p style="text-align: center; margin-top: 20px; color: var(--text-gray);">
                    –ö–∞–∂–¥–∞—è NFT - —ç—Ç–æ —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –≤ –∏–≥—Ä–µ
                </p>
                <div class="progress-bar">
                    <div class="progress" style="width: 71%"></div>
                </div>
                <div class="slide-counter">5/7</div>
            </div>

            <!-- –°–ª–∞–π–¥ 6: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <div id="slide6" class="slide hidden">
                <h2>üìä –ì–ª–æ–±–∞–ª—å–Ω–∞—è –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                <div class="stats-container">
                    <div class="stat-card">
                        <i class="fas fa-users" style="font-size: 2.5rem; color: var(--neon-blue); margin-bottom: 15px;"></i>
                        <div class="stat-value" id="totalPlayers">0</div>
                        <div class="stat-label">–í—Å–µ–≥–æ –∏–≥—Ä–æ–∫–æ–≤</div>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-chess-queen" style="font-size: 2.5rem; color: var(--gold); margin-bottom: 15px;"></i>
                        <div class="stat-value" id="userRank">0</div>
                        <div class="stat-label">–í–∞—à–µ –º–µ—Å—Ç–æ –≤ —Ä–µ–π—Ç–∏–Ω–≥–µ</div>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-calendar-alt" style="font-size: 2.5rem; color: var(--silver); margin-bottom: 15px;"></i>
                        <div class="stat-value" id="seasonDays">45</div>
                        <div class="stat-label">–î–Ω–µ–π –¥–ª–∏–ª—Å—è —Å–µ–∑–æ–Ω</div>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress" style="width: 85%"></div>
                </div>
                <div class="slide-counter">6/7</div>
            </div>

            <!-- –°–ª–∞–π–¥ 7: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏—Ç–æ–≥–æ–≤ -->
            <div id="slide7" class="slide hidden">
                <div class="completion-screen">
                    <div class="completion-icon">
                        <i class="fas fa-award"></i>
                    </div>
                    <h1>–ò–¢–û–ì–ò –ü–û–î–í–ï–î–ï–ù–´!</h1>
                    <p style="font-size: 1.2rem; margin: 20px 0 40px; color: var(--text-gray); max-width: 600px; line-height: 1.6;">
                        –°–ø–∞—Å–∏–±–æ –∑–∞ —É—á–∞—Å—Ç–∏–µ –≤ 1 —Å–µ–∑–æ–Ω–µ SamdGame! –í–∞—à–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –≤–ø–µ—á–∞—Ç–ª—è—é—Ç.<br>
                        –ì–æ—Ç–æ–≤—å—Ç–µ—Å—å –∫–æ 2 —Å–µ–∑–æ–Ω—É - –æ–Ω –±—É–¥–µ—Ç –µ—â–µ —ç–ø–∏—á–Ω–µ–µ!
                    </p>
                    <div class="season-badge">
                        –£—á–∞—Å—Ç–Ω–∏–∫ 1 —Å–µ–∑–æ–Ω–∞
                    </div>
                    <button id="nextSeasonBtn" class="button" style="margin-top: 40px;">
                        <i class="fas fa-rocket"></i> –ü–µ—Ä–µ–π—Ç–∏ –∫ 2 —Å–µ–∑–æ–Ω—É
                    </button>
                </div>
                <div class="progress-bar">
                    <div class="progress" style="width: 100%"></div>
                </div>
                <div class="slide-counter">7/7</div>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ -->
            <div style="display: flex; justify-content: space-between; margin-top: 30px;">
                <button id="prevBtn" class="button button-secondary">
                    <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
                </button>
                <button id="nextBtn" class="button">
                    –î–∞–ª–µ–µ <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω 2 —Å–µ–∑–æ–Ω–∞ -->
        <div id="season2Screen" class="hidden">
            <div style="text-align: center; padding: 40px 20px;">
                <div class="tree-icon">
                    <i class="fas fa-tree"></i>
                </div>
                <h1 style="color: #ff6b81; font-size: 3rem; margin-bottom: 10px;">üéÑ</h1>
                <h1>–°–ï–ó–û–ù 2</h1>
                <h2 style="color: #ff6b81;">–ù–æ–≤–æ–≥–æ–¥–Ω–µ–µ –ü—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ</h2>
                
                <div class="countdown">
                    <div class="countdown-title">–î–æ –Ω–∞—á–∞–ª–∞ –æ—Å—Ç–∞–ª–æ—Å—å:</div>
                    <div class="countdown-timer">
                        <div class="countdown-unit">
                            <div class="countdown-value" id="days">00</div>
                            <div class="countdown-label">–î–Ω–µ–π</div>
                        </div>
                        <div class="countdown-unit">
                            <div class="countdown-value" id="hours">00</div>
                            <div class="countdown-label">–ß–∞—Å–æ–≤</div>
                        </div>
                        <div class="countdown-unit">
                            <div class="countdown-value" id="minutes">00</div>
                            <div class="countdown-label">–ú–∏–Ω—É—Ç</div>
                        </div>
                        <div class="countdown-unit">
                            <div class="countdown-value" id="seconds">00</div>
                            <div class="countdown-label">–°–µ–∫—É–Ω–¥</div>
                        </div>
                    </div>
                </div>

                <div style="margin: 40px 0;">
                    <div class="gift-icon">
                        <i class="fas fa-gift"></i>
                    </div>
                    <h3 style="color: #2ecc71;">–ù–æ–≤–æ–≥–æ–¥–Ω–∏–µ –°—é—Ä–ø—Ä–∏–∑—ã!</h3>
                    <p style="font-size: 1.1rem; color: var(--text-gray); max-width: 600px; margin: 20px auto; line-height: 1.6;">
                        –í—Ç–æ—Ä–æ–π —Å–µ–∑–æ–Ω –ø—Ä–∏–Ω–µ—Å–µ—Ç –Ω–æ–≤—ã–µ –∑–∞–¥–∞–Ω–∏—è, —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ NFT-–∫–æ–ª–ª–µ–∫—Ü–∏–∏<br>
                        –∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –Ω–æ–≤–æ–≥–æ–¥–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥—ã. –ì–æ—Ç–æ–≤—å—Ç–µ—Å—å –∫ –ø—Ä–∞–∑–¥–Ω–∏—á–Ω–æ–º—É –≤–µ—Å–µ–ª—å—é!
                    </p>
                </div>

                <div class="season-badge" style="background: linear-gradient(135deg, #ff6b6b, #ffa726); color: white;">
                    <i class="fas fa-snowflake"></i> –ù–æ–≤–æ–≥–æ–¥–Ω–∏–π —Å–µ–∑–æ–Ω <i class="fas fa-snowflake"></i>
                </div>

                <button id="viewResultsAgainBtn" class="button" style="margin-top: 50px;">
                    <i class="fas fa-history"></i> –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Ç–æ–≥–∏ –µ—â–µ —Ä–∞–∑
                </button>

                <button class="telegram-button" onclick="window.open('https://t.me/samdgame', '_blank')">
                    <i class="fab fa-telegram"></i> –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ —á–∞—Ç—É
                </button>
            </div>
        </div>
    </div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyCcxotG6DNpkUxTXplC4DURNe-S02otuc4",
            authDomain: "samdcoin-e65a5.firebaseapp.com",
            databaseURL: "https://samdcoin-e65a5-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "samdcoin-e65a5",
            storageBucket: "samdcoin-e65a5.firebasestorage.app",
            messagingSenderId: "30873122562",
            appId: "1:30873122562:web:5243417cc6ebc5abe4341b",
            measurementId: "G-BBPFLK9DMS"
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // Telegram Web App
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.ready();

        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
        let currentUser = null;
        let userData = null;
        let globalStats = null;
        let userNFTs = [];
        let hasViewedResults = false;
        let currentSlide = 1;
        const totalSlides = 7;
        const season2StartDate = new Date('2025-12-19T17:00:00').getTime();

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', async function() {
            // –°–æ–∑–¥–∞–µ–º —Å–Ω–µ–∂–∏–Ω–∫–∏ –∏ —É–∫—Ä–∞—à–µ–Ω–∏—è
            createSnowflakes();
            createChristmasBalls();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–º–æ—Ç—Ä–µ–ª –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –∏—Ç–æ–≥–∏
            hasViewedResults = localStorage.getItem('samdgame_results_viewed') === 'true';
            
            try {
                // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Telegram
                const tgUser = tg.initDataUnsafe?.user;
                if (tgUser) {
                    // –ò—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ Telegram ID
                    await findUserByTelegramId(tgUser.id);
                } else {
                    showError('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å Telegram –Ω–µ –Ω–∞–π–¥–µ–Ω');
                    return;
                }
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                await loadGlobalStats();
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º NFT –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                await loadUserNFTs();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º UI —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
                updateUIWithRealData();
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω
                if (!hasViewedResults) {
                    showSeasonCompleteScreen();
                } else {
                    showSeason2Screen();
                }
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:', error);
                showError('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö: ' + error.message);
                return;
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Ç–∞–π–º–µ—Ä –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á–µ—Ç–∞
            updateCountdown();
            setInterval(updateCountdown, 1000);
            
            // –°–∫—Ä—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏
            document.getElementById('loadingScreen').classList.add('hidden');
        });

        // –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ Telegram ID
        async function findUserByTelegramId(telegramId) {
            return new Promise((resolve, reject) => {
                const usersRef = database.ref('users');
                
                usersRef.orderByChild('telegramId').equalTo(telegramId.toString())
                    .once('value')
                    .then(snapshot => {
                        if (snapshot.exists()) {
                            // –ù–∞—à–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                            const userData = snapshot.val();
                            const userId = Object.keys(userData)[0];
                            currentUser = {
                                id: userId,
                                ...userData[userId]
                            };
                            resolve(currentUser);
                        } else {
                            // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω, –ø—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ –¥—Ä—É–≥–æ–º—É –ø–æ–ª—é
                            findUserByAnyId(telegramId).then(resolve).catch(reject);
                        }
                    })
                    .catch(reject);
            });
        }

        // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        async function findUserByAnyId(userId) {
            return new Promise((resolve, reject) => {
                // –ü—Ä–æ–±—É–µ–º –Ω–∞–π—Ç–∏ –ø–æ —Ä–∞–∑–Ω—ã–º –ø–æ–ª—è–º
                const usersRef = database.ref('users');
                
                usersRef.orderByChild('id').equalTo(userId.toString())
                    .once('value')
                    .then(snapshot => {
                        if (snapshot.exists()) {
                            const userData = snapshot.val();
                            const firstKey = Object.keys(userData)[0];
                            currentUser = {
                                id: firstKey,
                                ...userData[firstKey]
                            };
                            resolve(currentUser);
                        } else {
                            // –ò—â–µ–º –ø–æ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram
                            const tgUser = tg.initDataUnsafe?.user;
                            if (tgUser && tgUser.username) {
                                usersRef.orderByChild('username').equalTo(tgUser.username)
                                    .once('value')
                                    .then(snapshot2 => {
                                        if (snapshot2.exists()) {
                                            const userData2 = snapshot2.val();
                                            const firstKey2 = Object.keys(userData2)[0];
                                            currentUser = {
                                                id: firstKey2,
                                                ...userData2[firstKey2]
                                            };
                                            resolve(currentUser);
                                        } else {
                                            reject(new Error('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö'));
                                        }
                                    })
                                    .catch(reject);
                            } else {
                                reject(new Error('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö'));
                            }
                        }
                    })
                    .catch(reject);
            });
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        async function loadGlobalStats() {
            return new Promise((resolve, reject) => {
                const statsRef = database.ref('stats/season1');
                
                statsRef.once('value')
                    .then(snapshot => {
                        if (snapshot.exists()) {
                            globalStats = snapshot.val();
                            resolve(globalStats);
                        } else {
                            // –ï—Å–ª–∏ –Ω–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏, –≤—ã—á–∏—Å–ª—è–µ–º –∏–∑ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                            calculateGlobalStats().then(resolve).catch(reject);
                        }
                    })
                    .catch(reject);
            });
        }

        // –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏–∑ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        async function calculateGlobalStats() {
            return new Promise((resolve, reject) => {
                const usersRef = database.ref('users');
                
                usersRef.once('value')
                    .then(snapshot => {
                        if (!snapshot.exists()) {
                            reject(new Error('–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π'));
                            return;
                        }
                        
                        const users = snapshot.val();
                        let totalCoins = 0;
                        let totalTickets = 0;
                        let totalNFTs = 0;
                        let totalPlayers = 0;
                        
                        Object.values(users).forEach(user => {
                            if (user.coins) totalCoins += parseInt(user.coins) || 0;
                            if (user.tickets) totalTickets += parseInt(user.tickets) || 0;
                            if (user.nftCount) totalNFTs += parseInt(user.nftCount) || 0;
                            totalPlayers++;
                        });
                        
                        globalStats = {
                            totalCoins,
                            totalTickets,
                            totalNFTs,
                            totalPlayers,
                            // –†–µ–π—Ç–∏–Ω–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                            userRank: calculateUserRank(currentUser.id, users)
                        };
                        
                        resolve(globalStats);
                    })
                    .catch(reject);
            });
        }

        // –†–∞—Å—á–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function calculateUserRank(userId, allUsers) {
            // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –º–æ–Ω–µ—Ç
            const usersArray = Object.entries(allUsers).map(([id, user]) => ({
                id,
                coins: parseInt(user.coins) || 0
            }));
            
            usersArray.sort((a, b) => b.coins - a.coins);
            
            // –ù–∞—Ö–æ–¥–∏–º –ø–æ–∑–∏—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const userIndex = usersArray.findIndex(user => user.id === userId);
            
            return userIndex !== -1 ? userIndex + 1 : usersArray.length + 1;
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ NFT –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        async function loadUserNFTs() {
            return new Promise((resolve, reject) => {
                if (!currentUser || !currentUser.id) {
                    userNFTs = [];
                    resolve([]);
                    return;
                }
                
                const nftRef = database.ref(`users/${currentUser.id}/nfts`);
                
                nftRef.once('value')
                    .then(snapshot => {
                        if (snapshot.exists()) {
                            const nftsData = snapshot.val();
                            userNFTs = Object.values(nftsData || {});
                        } else {
                            userNFTs = [];
                        }
                        resolve(userNFTs);
                    })
                    .catch(reject);
            });
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
        function updateUIWithRealData() {
            if (!currentUser) return;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
            const userName = currentUser.firstName || currentUser.name || '–ò–≥—Ä–æ–∫';
            document.getElementById('userName').textContent = userName;
            
            // –ê–≤–∞—Ç–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            if (currentUser.avatar || currentUser.photoUrl) {
                document.getElementById('userAvatar').src = currentUser.avatar || currentUser.photoUrl;
            }
            
            // –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            document.getElementById('userCoins').textContent = formatNumber(currentUser.coins || 0);
            document.getElementById('userTickets').textContent = formatNumber(currentUser.tickets || 0);
            document.getElementById('userNFTsCount').textContent = userNFTs.length;
            
            // –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
            if (globalStats) {
                document.getElementById('globalCoins').textContent = formatNumber(globalStats.totalCoins || 0);
                document.getElementById('globalTickets').textContent = formatNumber(globalStats.totalTickets || 0);
                document.getElementById('globalNFTsCount').textContent = formatNumber(globalStats.totalNFTs || 0);
                document.getElementById('totalPlayers').textContent = formatNumber(globalStats.totalPlayers || 0);
                document.getElementById('userRank').textContent = '#' + (globalStats.userRank || 0);
                
                // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ä–µ–π—Ç–∏–Ω–≥ —Å –∏–∫–æ–Ω–∫–æ–π
                const userRankElement = document.getElementById('userRank');
                const rank = globalStats.userRank || 0;
                userRankElement.innerHTML = `
                    <div class="rank-badge ${getRankClass(rank)}">
                        ${rank}
                    </div>
                `;
            }
            
            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º NFT
            displayUserNFTs();
        }

        // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Å–µ–ª
        function formatNumber(num) {
            return new Intl.NumberFormat('ru-RU').format(num);
        }

        // –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞ –¥–ª—è —Ä–µ–π—Ç–∏–Ω–≥–∞
        function getRankClass(rank) {
            if (rank === 1) return 'rank-1';
            if (rank === 2) return 'rank-2';
            if (rank === 3) return 'rank-3';
            return 'rank-other';
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ NFT –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function displayUserNFTs() {
            const nftGrid = document.getElementById('nftGrid');
            nftGrid.innerHTML = '';
            
            if (userNFTs.length === 0) {
                nftGrid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 40px;">
                        <i class="fas fa-box-open" style="font-size: 3rem; color: var(--text-gray); margin-bottom: 20px;"></i>
                        <p style="color: var(--text-gray);">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç NFT</p>
                    </div>
                `;
                return;
            }
            
            userNFTs.forEach(nft => {
                const nftItem = document.createElement('div');
                nftItem.className = 'nft-item';
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–µ–¥–∫–æ—Å—Ç—å
                const rarity = nft.rarity || 'common';
                const rarityClass = `rarity-${rarity}`;
                const rarityText = getRarityText(rarity);
                
                nftItem.innerHTML = `
                    <img class="nft-image" src="${nft.imageUrl || 'https://via.placeholder.com/100?text=NFT'}" 
                         alt="${nft.name || 'NFT'}" 
                         onerror="this.src='https://via.placeholder.com/100?text=NFT'">
                    <div style="font-weight: bold; color: white; margin-bottom: 5px;">${nft.name || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è NFT'}</div>
                    <div class="nft-rarity ${rarityClass}">${rarityText}</div>
                    ${nft.description ? `<p style="font-size: 0.8rem; color: var(--text-gray); margin-top: 8px;">${nft.description}</p>` : ''}
                `;
                
                nftGrid.appendChild(nftItem);
            });
        }

        // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —Ä–µ–¥–∫–æ—Å—Ç–∏
        function getRarityText(rarity) {
            const rarityMap = {
                'legendary': '–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è',
                'epic': '–≠–ø–∏—á–µ—Å–∫–∞—è',
                'rare': '–†–µ–¥–∫–∞—è',
                'common': '–û–±—ã—á–Ω–∞—è',
                'holiday': '–ü—Ä–∞–∑–¥–Ω–∏—á–Ω–∞—è'
            };
            return rarityMap[rarity] || rarity;
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–Ω–µ–∂–∏–Ω–æ–∫
        function createSnowflakes() {
            const snowflakesContainer = document.getElementById('snowflakes');
            for (let i = 0; i < 50; i++) {
                const snowflake = document.createElement('div');
                snowflake.className = 'snowflake';
                snowflake.style.width = Math.random() * 10 + 5 + 'px';
                snowflake.style.height = snowflake.style.width;
                snowflake.style.left = Math.random() * 100 + 'vw';
                snowflake.style.opacity = Math.random() * 0.5 + 0.3;
                snowflake.style.animationDuration = Math.random() * 5 + 5 + 's';
                snowflake.style.animationDelay = Math.random() * 5 + 's';
                snowflakesContainer.appendChild(snowflake);
            }
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ–¥–Ω–∏—Ö —à–∞—Ä–æ–≤
        function createChristmasBalls() {
            const ballsContainer = document.getElementById('christmasBalls');
            const colors = ['#ff3838', '#32ff7e', '#18dcff', '#ff9f1a', '#fffa65'];
            
            for (let i = 0; i < 15; i++) {
                const ball = document.createElement('div');
                ball.className = 'christmas-ball';
                ball.style.background = colors[Math.floor(Math.random() * colors.length)];
                ball.style.left = Math.random() * 100 + 'vw';
                ball.style.top = Math.random() * 100 + 'vh';
                ball.style.width = Math.random() * 30 + 20 + 'px';
                ball.style.height = ball.style.width;
                ball.style.animationDelay = Math.random() * 3 + 's';
                ball.style.animationDuration = Math.random() * 2 + 2 + 's';
                ballsContainer.appendChild(ball);
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á–µ—Ç–∞
        function updateCountdown() {
            const now = new Date().getTime();
            const timeLeft = season2StartDate - now;
            
            if (timeLeft > 0) {
                const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
                
                document.getElementById('days').textContent = days.toString().padStart(2, '0');
                document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
                document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
                document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
            } else {
                document.querySelector('.countdown').innerHTML = '<h2 style="color: #2ecc71;">–°–µ–∑–æ–Ω –Ω–∞—á–∞–ª—Å—è!</h2>';
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É
        function showError(message) {
            document.getElementById('loadingScreen').classList.add('hidden');
            document.getElementById('errorScreen').classList.remove('hidden');
            
            const errorElement = document.querySelector('#errorScreen p');
            if (errorElement && message) {
                errorElement.textContent = message;
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —ç–∫—Ä–∞–Ω –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–µ–∑–æ–Ω–∞
        function showSeasonCompleteScreen() {
            document.body.classList.remove('new-year-theme');
            document.getElementById('seasonCompleteScreen').classList.remove('hidden');
            document.getElementById('resultsSlides').classList.add('hidden');
            document.getElementById('season2Screen').classList.add('hidden');
            document.getElementById('errorScreen').classList.add('hidden');
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —Å–ª–∞–π–¥—ã —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
        function showResultsSlides() {
            document.body.classList.remove('new-year-theme');
            document.getElementById('seasonCompleteScreen').classList.add('hidden');
            document.getElementById('resultsSlides').classList.remove('hidden');
            document.getElementById('season2Screen').classList.add('hidden');
            document.getElementById('errorScreen').classList.add('hidden');
            showSlide(1);
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —ç–∫—Ä–∞–Ω 2 —Å–µ–∑–æ–Ω–∞
        function showSeason2Screen() {
            document.body.classList.add('new-year-theme');
            document.getElementById('seasonCompleteScreen').classList.add('hidden');
            document.getElementById('resultsSlides').classList.add('hidden');
            document.getElementById('season2Screen').classList.remove('hidden');
            document.getElementById('errorScreen').classList.add('hidden');
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–ª–∞–π–¥
        function showSlide(slideNumber) {
            // –°–∫—Ä—ã—Ç—å –≤—Å–µ —Å–ª–∞–π–¥—ã
            for (let i = 1; i <= totalSlides; i++) {
                const slide = document.getElementById(`slide${i}`);
                if (slide) {
                    slide.classList.add('hidden');
                }
            }
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –Ω—É–∂–Ω—ã–π —Å–ª–∞–π–¥
            const currentSlideElement = document.getElementById(`slide${slideNumber}`);
            if (currentSlideElement) {
                currentSlideElement.classList.remove('hidden');
            }
            
            // –û–±–Ω–æ–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
            document.getElementById('prevBtn').style.display = slideNumber === 1 ? 'none' : 'block';
            document.getElementById('nextBtn').style.display = slideNumber === totalSlides ? 'none' : 'block';
            
            // –ï—Å–ª–∏ —ç—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–ª–∞–π–¥, –æ–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏
            if (slideNumber === totalSlides) {
                document.getElementById('nextBtn').textContent = '–ó–∞–≤–µ—Ä—à–∏—Ç—å';
            }
            
            currentSlide = slideNumber;
        }

        // –ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Å–ª–∞–π–¥—É
        function nextSlide() {
            if (currentSlide < totalSlides) {
                showSlide(currentSlide + 1);
            } else {
                // –ï—Å–ª–∏ —ç—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–ª–∞–π–¥, –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ 2 —Å–µ–∑–æ–Ω—É
                hasViewedResults = true;
                localStorage.setItem('samdgame_results_viewed', 'true');
                showSeason2Screen();
            }
        }

        // –ü–µ—Ä–µ–π—Ç–∏ –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É —Å–ª–∞–π–¥—É
        function prevSlide() {
            if (currentSlide > 1) {
                showSlide(currentSlide - 1);
            }
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        document.getElementById('viewResultsBtn').addEventListener('click', showResultsSlides);
        document.getElementById('viewResultsAgainBtn').addEventListener('click', showResultsSlides);
        document.getElementById('nextSeasonBtn').addEventListener('click', () => {
            hasViewedResults = true;
            localStorage.setItem('samdgame_results_viewed', 'true');
            showSeason2Screen();
        });
        document.getElementById('nextBtn').addEventListener('click', nextSlide);
        document.getElementById('prevBtn').addEventListener('click', prevSlide);
        document.getElementById('retryButton').addEventListener('click', () => {
            location.reload();
        });

        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∞–≤–∏—à –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
        document.addEventListener('keydown', function(event) {
            if (event.key === 'ArrowRight') {
                nextSlide();
            } else if (event.key === 'ArrowLeft') {
                prevSlide();
            }
        });

        // –î–æ–±–∞–≤–ª—è–µ–º —Å–≤–∞–π–ø—ã –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
        let touchStartX = 0;
        let touchEndX = 0;

        document.addEventListener('touchstart', function(event) {
            touchStartX = event.changedTouches[0].screenX;
        });

        document.addEventListener('touchend', function(event) {
            touchEndX = event.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            const swipeThreshold = 50;
            const diff = touchStartX - touchEndX;
            
            if (Math.abs(diff) > swipeThreshold) {
                if (diff > 0) {
                    // –°–≤–∞–π–ø –≤–ª–µ–≤–æ - —Å–ª–µ–¥—É—é—â–∏–π —Å–ª–∞–π–¥
                    nextSlide();
                } else {
                    // –°–≤–∞–π–ø –≤–ø—Ä–∞–≤–æ - –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Å–ª–∞–π–¥
                    prevSlide();
                }
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–æ–ª—å—à–∏—Ö —á–∏—Å–µ–ª
        window.formatNumber = formatNumber;
    </script>
</body>
</html>