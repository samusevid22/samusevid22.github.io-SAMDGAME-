<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SamdGame | –ò—Ç–æ–≥–∏ 2 –°–µ–∑–æ–Ω–∞</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <style>
        /* –°–ë–†–û–° –ò –ë–ê–ó–û–í–´–ï –°–¢–ò–õ–ò */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-text-size-adjust: 100%;
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow-x: hidden;
            position: fixed; /* –§–∏–∫—Å–∏—Ä—É–µ–º –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0a0b15 0%, #111426 100%);
            color: white;
            touch-action: pan-y pinch-zoom;
            overscroll-behavior: none;
        }

        /* –≠–ö–†–ê–ù –ó–ê–ì–†–£–ó–ö–ò */
        #loadingScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0a0b15;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 0.3s;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(58, 134, 255, 0.2);
            border-top-color: #3a86ff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        #loadingText {
            color: #8b9bb5;
            font-size: 16px;
            text-align: center;
            padding: 0 20px;
        }

        /* –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ô–ù–ï–† */
        #appContainer {
            width: 100%;
            height: 100vh;
            position: relative;
            overflow: hidden;
            opacity: 0;
            transition: opacity 0.3s;
        }

        #appContainer.show {
            opacity: 1;
        }

        /* –°–õ–ê–ô–î–´ */
        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            transform: translateX(100%);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            background: linear-gradient(135deg, rgba(10, 11, 21, 0.95), rgba(17, 20, 38, 0.95));
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        .slide.active {
            transform: translateX(0);
        }

        .slide.prev {
            transform: translateX(-100%);
        }

        /* –ó–ê–ì–û–õ–û–í–ö–ò */
        .slide-title {
            font-size: min(10vw, 42px);
            font-weight: 800;
            background: linear-gradient(135deg, #3a86ff, #8338ec);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 16px;
            line-height: 1.2;
        }

        .slide-subtitle {
            font-size: min(4vw, 18px);
            color: #8b9bb5;
            margin-bottom: 30px;
            line-height: 1.4;
            max-width: 600px;
        }

        /* –°–¢–ê–¢–ò–°–¢–ò–ö–ê */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            width: 100%;
            max-width: 500px;
            margin: 30px 0;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 25px 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: transform 0.3s, border-color 0.3s;
        }

        .stat-card:active {
            transform: scale(0.98);
        }

        .stat-value {
            font-size: min(10vw, 40px);
            font-weight: 800;
            margin-bottom: 8px;
            color: #3a86ff;
        }

        .global-stat {
            color: #8338ec;
        }

        .stat-label {
            font-size: 14px;
            color: #8b9bb5;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* NFT –ì–†–ò–î */
        .nft-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            width: 100%;
            max-width: 500px;
            margin: 30px 0;
        }

        @media (min-width: 480px) {
            .nft-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        .nft-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .nft-item:active {
            transform: scale(0.98);
        }

        .nft-image {
            width: 80px;
            height: 80px;
            border-radius: 12px;
            margin-bottom: 12px;
            object-fit: cover;
            border: 2px solid #3a86ff;
            background: rgba(0, 0, 0, 0.2);
        }

        .nft-name {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            width: 100%;
            text-align: center;
        }

        .nft-rarity {
            font-size: 12px;
            color: #8b9bb5;
        }

        /* –ö–ù–û–ü–ö–ò */
        .btn {
            background: linear-gradient(135deg, #3a86ff, #8338ec);
            color: white;
            border: none;
            padding: 18px 32px;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px;
            min-width: 200px;
            justify-content: center;
            user-select: none;
            -webkit-user-select: none;
        }

        .btn:active {
            transform: scale(0.96);
            box-shadow: 0 5px 15px rgba(58, 134, 255, 0.4);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        /* –ü–†–û–ì–†–ï–°–° –ë–ê–† */
        .progress-container {
            width: 100%;
            max-width: 500px;
            margin: 30px 0;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3a86ff, #8338ec);
            border-radius: 3px;
            width: 0%;
            transition: width 0.3s ease;
        }

        .progress-text {
            font-size: 14px;
            color: #8b9bb5;
            display: flex;
            justify-content: space-between;
        }

        /* –≠–ö–†–ê–ù –°–ï–ó–û–ù–ê 2 */
        .new-year-theme {
            background: linear-gradient(135deg, 
                rgba(10, 11, 21, 0.95),
                rgba(30, 41, 59, 0.95));
        }

        .countdown {
            margin: 30px 0;
        }

        .countdown-title {
            font-size: min(6vw, 24px);
            color: #38b000;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .countdown-timer {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .countdown-unit {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 20px;
            min-width: 70px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .countdown-value {
            font-size: min(10vw, 32px);
            font-weight: 700;
            color: #38b000;
            margin-bottom: 5px;
        }

        .countdown-label {
            font-size: 12px;
            color: #8b9bb5;
        }

        /* –ù–ê–í–ò–ì–ê–¶–ò–Ø */
        .nav-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* –ò–ö–û–ù–ö–ò */
        .icon-large {
            font-size: 60px;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #3a86ff, #8338ec);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* –û–®–ò–ë–ö–ò */
        .error-message {
            color: #ff4757;
            font-size: 14px;
            margin-top: 10px;
            padding: 10px;
            background: rgba(255, 71, 87, 0.1);
            border-radius: 10px;
            border: 1px solid rgba(255, 71, 87, 0.2);
        }

        /* –°–í–ê–ô–ü –ò–ù–î–ò–ö–ê–¢–û–† */
        .swipe-hint {
            position: fixed;
            bottom: 20px;
            left: 0;
            width: 100%;
            text-align: center;
            color: rgba(139, 155, 181, 0.5);
            font-size: 14px;
            animation: fadeInOut 3s infinite;
        }

        @keyframes fadeInOut {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }
    </style>
</head>
<body>
    <!-- –≠–ö–†–ê–ù –ó–ê–ì–†–£–ó–ö–ò -->
    <div id="loadingScreen">
        <div class="spinner"></div>
        <div id="loadingText">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</div>
    </div>

    <!-- –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ô–ù–ï–† -->
    <div id="appContainer">
        <!-- –°–õ–ê–ô–î 1: –í–í–ï–î–ï–ù–ò–ï -->
        <div class="slide active" id="slide1">
            <div class="icon-large">
                <i class="fas fa-trophy"></i>
            </div>
            <h1 class="slide-title">–°–ï–ó–û–ù 1 –ó–ê–í–ï–†–®–Å–ù!</h1>
            <p class="slide-subtitle">–í—Ä–µ–º—è –ø–æ–¥–≤–µ—Å—Ç–∏ –∏—Ç–æ–≥–∏ –≤–∞—à–∏—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π</p>
            
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="slideProgress"></div>
                </div>
                <div class="progress-text">
                    <span>–°–ª–∞–π–¥ 1 –∏–∑ 7</span>
                    <span id="userInfo">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                </div>
            </div>
            
            <button class="btn" id="startBtn">
                <i class="fas fa-chart-bar"></i>
                –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Ç–æ–≥–∏
            </button>
        </div>

        <!-- –°–õ–ê–ô–î 2: –°–ê–ú–î–ö–û–ò–ù–´ -->
        <div class="slide" id="slide2">
            <div class="icon-large">
                <i class="fas fa-coins"></i>
            </div>
            <h1 class="slide-title">–í–∞—à–∏ –°–∞–º–¥–∫–æ–∏–Ω—ã</h1>
            <p class="slide-subtitle">–°–∫–æ–ª—å–∫–æ –≤—ã –∑–∞—Ä–∞–±–æ—Ç–∞–ª–∏ –≤ –ø–µ—Ä–≤–æ–º —Å–µ–∑–æ–Ω–µ</p>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="userCoins">0</div>
                    <div class="stat-label">–í–∞—à–∏ –°–∞–º–¥–∫–æ–∏–Ω—ã</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value global-stat" id="totalCoins">0</div>
                    <div class="stat-label">–í—Å–µ–≥–æ —É –∏–≥—Ä–æ–∫–æ–≤</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="avgCoins">0</div>
                    <div class="stat-label">–°—Ä–µ–¥–Ω–µ–µ –Ω–∞ –∏–≥—Ä–æ–∫–∞</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="maxCoins">0</div>
                    <div class="stat-label">–ú–∞–∫—Å–∏–º—É–º</div>
                </div>
            </div>
            
            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="prevSlide()">
                    <i class="fas fa-arrow-left"></i>
                    –ù–∞–∑–∞–¥
                </button>
                <button class="btn" onclick="nextSlide()">
                    –î–∞–ª–µ–µ
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>

        <!-- –°–õ–ê–ô–î 3: –ë–ò–õ–ï–¢–´ -->
        <div class="slide" id="slide3">
            <div class="icon-large">
                <i class="fas fa-ticket-alt"></i>
            </div>
            <h1 class="slide-title">–í–∞—à–∏ –ë–∏–ª–µ—Ç—ã</h1>
            <p class="slide-subtitle">–í–∞—à–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –≤ –ø–æ–ª—É—á–µ–Ω–∏–∏ –±–∏–ª–µ—Ç–æ–≤</p>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="userTickets">0</div>
                    <div class="stat-label">–í–∞—à–∏ –ë–∏–ª–µ—Ç—ã</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value global-stat" id="totalTickets">0</div>
                    <div class="stat-label">–í—Å–µ–≥–æ —É –∏–≥—Ä–æ–∫–æ–≤</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="casesOpened">0</div>
                    <div class="stat-label">–ö–µ–π—Å–æ–≤ –æ—Ç–∫—Ä—ã—Ç–æ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="avgTickets">0</div>
                    <div class="stat-label">–°—Ä–µ–¥–Ω–µ–µ –Ω–∞ –∏–≥—Ä–æ–∫–∞</div>
                </div>
            </div>
            
            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="prevSlide()">
                    <i class="fas fa-arrow-left"></i>
                    –ù–∞–∑–∞–¥
                </button>
                <button class="btn" onclick="nextSlide()">
                    –î–∞–ª–µ–µ
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>

        <!-- –°–õ–ê–ô–î 4: NFT -->
        <div class="slide" id="slide4">
            <div class="icon-large">
                <i class="fas fa-gem"></i>
            </div>
            <h1 class="slide-title">–í–∞—à–∞ –ö–æ–ª–ª–µ–∫—Ü–∏—è NFT</h1>
            <p class="slide-subtitle">–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã —Å–æ–±—Ä–∞–ª–∏</p>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="userNFTs">0</div>
                    <div class="stat-label">–í–∞—à–∏ NFT</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value global-stat" id="totalNFTs">0</div>
                    <div class="stat-label">–í—Å–µ–≥–æ —É –∏–≥—Ä–æ–∫–æ–≤</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="collectionValue">0</div>
                    <div class="stat-label">–°—Ç–æ–∏–º–æ—Å—Ç—å (SAMD)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="avgNFTs">0</div>
                    <div class="stat-label">–°—Ä–µ–¥–Ω–µ–µ –Ω–∞ –∏–≥—Ä–æ–∫–∞</div>
                </div>
            </div>
            
            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="prevSlide()">
                    <i class="fas fa-arrow-left"></i>
                    –ù–∞–∑–∞–¥
                </button>
                <button class="btn" onclick="nextSlide()">
                    –î–∞–ª–µ–µ
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>

        <!-- –°–õ–ê–ô–î 5: NFT –ö–û–õ–õ–ï–ö–¶–ò–Ø -->
        <div class="slide" id="slide5">
            <h1 class="slide-title">–í–∞—à–∏ NFT –ö–æ–ª–ª–µ–∫—Ü–∏–∏</h1>
            <p class="slide-subtitle">–ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤—Å–µ –≤–∞—à–∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã</p>
            
            <div class="nft-grid" id="nftGrid">
                <!-- NFT –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
            
            <div style="color: #8b9bb5; margin: 20px 0; font-size: 14px;">
                <div id="rarityStats">–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–¥–∫–æ—Å—Ç–µ–π...</div>
            </div>
            
            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="prevSlide()">
                    <i class="fas fa-arrow-left"></i>
                    –ù–∞–∑–∞–¥
                </button>
                <button class="btn" onclick="nextSlide()">
                    –î–∞–ª–µ–µ
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>

        <!-- –°–õ–ê–ô–î 6: –°–¢–ê–¢–ò–°–¢–ò–ö–ê -->
        <div class="slide" id="slide6">
            <div class="icon-large">
                <i class="fas fa-globe"></i>
            </div>
            <h1 class="slide-title">–ì–ª–æ–±–∞–ª—å–Ω–∞—è –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h1>
            <p class="slide-subtitle">–ö–∞–∫ –≤—ã –≤—ã–≥–ª—è–¥–∏—Ç–µ –Ω–∞ —Ñ–æ–Ω–µ –¥—Ä—É–≥–∏—Ö –∏–≥—Ä–æ–∫–æ–≤</p>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="totalPlayers">0</div>
                    <div class="stat-label">–í—Å–µ–≥–æ –∏–≥—Ä–æ–∫–æ–≤</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="userRank">#0</div>
                    <div class="stat-label">–í–∞—à–µ –º–µ—Å—Ç–æ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="topPlayer">-</div>
                    <div class="stat-label">–õ—É—á—à–∏–π –∏–≥—Ä–æ–∫</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">45</div>
                    <div class="stat-label">–î–Ω–µ–π —Å–µ–∑–æ–Ω–∞</div>
                </div>
            </div>
            
            <div style="margin: 20px 0; padding: 15px; background: rgba(58, 134, 255, 0.1); border-radius: 15px; border: 1px solid rgba(58, 134, 255, 0.2);">
                <div style="color: #3a86ff; font-weight: 600; margin-bottom: 8px;">–í–∞—à–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:</div>
                <div id="performanceStats" style="color: #8b9bb5; font-size: 14px;">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>
            
            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="prevSlide()">
                    <i class="fas fa-arrow-left"></i>
                    –ù–∞–∑–∞–¥
                </button>
                <button class="btn" onclick="nextSlide()">
                    –î–∞–ª–µ–µ
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>

        <!-- –°–õ–ê–ô–î 7: –ó–ê–í–ï–†–®–ï–ù–ò–ï -->
        <div class="slide" id="slide7">
            <div class="icon-large">
                <i class="fas fa-award"></i>
            </div>
            <h1 class="slide-title">–ò—Ç–æ–≥–∏ –ü–æ–¥–≤–µ–¥–µ–Ω—ã!</h1>
            <p class="slide-subtitle">–°–ø–∞—Å–∏–±–æ –∑–∞ —É—á–∞—Å—Ç–∏–µ –≤ –ø–µ—Ä–≤–æ–º —Å–µ–∑–æ–Ω–µ SamdGame!</p>
            
            <div style="margin: 30px 0; padding: 20px; background: rgba(255, 190, 11, 0.1); border-radius: 20px; border: 1px solid rgba(255, 190, 11, 0.3); width: 100%; max-width: 500px;">
                <div style="color: #ffbe0b; font-size: 20px; font-weight: 700; margin-bottom: 10px;">–£—á–∞—Å—Ç–Ω–∏–∫ 1 —Å–µ–∑–æ–Ω–∞</div>
                <div style="color: rgba(255, 190, 11, 0.8); font-size: 14px;">–í—ã –ø–æ–ª—É—á–∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å —É—á–∞—Å—Ç–Ω–∏–∫–∞ –ø–µ—Ä–≤–æ–≥–æ —Å–µ–∑–æ–Ω–∞!</div>
            </div>
            
            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="prevSlide()">
                    <i class="fas fa-arrow-left"></i>
                    –ù–∞–∑–∞–¥
                </button>
                <button class="btn" id="season2Btn">
                    –ö —Å–µ–∑–æ–Ω—É 2
                    <i class="fas fa-rocket"></i>
                </button>
            </div>
        </div>

        <!-- –≠–ö–†–ê–ù –°–ï–ó–û–ù–ê 2 -->
        <div class="slide new-year-theme" id="season2Screen">
            <h1 class="slide-title" style="color: #38b000;">–°–ï–ó–û–ù 2</h1>
            <p class="slide-subtitle" style="color: #38b000;">–ù–æ–≤–æ–≥–æ–¥–Ω–µ–µ –ü—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è!</p>
            
            <div class="countdown">
                <div class="countdown-title">–î–æ –Ω–∞—á–∞–ª–∞ –æ—Å—Ç–∞–ª–æ—Å—å:</div>
                <div class="countdown-timer">
                    <div class="countdown-unit">
                        <div class="countdown-value" id="days">00</div>
                        <div class="countdown-label">–î–Ω–µ–π</div>
                    </div>
                    <div class="countdown-unit">
                        <div class="countdown-value" id="hours">00</div>
                        <div class="countdown-label">–ß–∞—Å–æ–≤</div>
                    </div>
                    <div class="countdown-unit">
                        <div class="countdown-value" id="minutes">00</div>
                        <div class="countdown-label">–ú–∏–Ω—É—Ç</div>
                    </div>
                    <div class="countdown-unit">
                        <div class="countdown-value" id="seconds">00</div>
                        <div class="countdown-label">–°–µ–∫—É–Ω–¥</div>
                    </div>
                </div>
            </div>
            
            <div style="margin: 30px 0; width: 100%; max-width: 500px;">
                <h3 style="color: #8338ec; margin-bottom: 15px; font-size: 20px;">–ß—Ç–æ –Ω–æ–≤–æ–≥–æ –≤ —Å–µ–∑–æ–Ω–µ 2:</h3>
                <div style="text-align: left; color: #8b9bb5; font-size: 14px; line-height: 1.6;">
                    <div style="margin-bottom: 10px; display: flex; align-items: flex-start; gap: 10px;">
                        <i class="fas fa-star" style="color: #ffbe0b; margin-top: 2px;"></i>
                        <span>–ù–æ–≤—ã–µ NFT –∫–æ–ª–ª–µ–∫—Ü–∏–∏ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏</span>
                    </div>
                    <div style="margin-bottom: 10px; display: flex; align-items: flex-start; gap: 10px;">
                        <i class="fas fa-gift" style="color: #8338ec; margin-top: 2px;"></i>
                        <span>–ù–æ–≤–æ–≥–æ–¥–Ω–∏–µ —Å—é—Ä–ø—Ä–∏–∑—ã –∏ –ø—Ä–æ–º–æ–∫–æ–¥—ã</span>
                    </div>
                    <div style="margin-bottom: 10px; display: flex; align-items: flex-start; gap: 10px;">
                        <i class="fas fa-trophy" style="color: #38b000; margin-top: 2px;"></i>
                        <span>–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ —Ç—É—Ä–Ω–∏—Ä—ã —Å –Ω–∞–≥—Ä–∞–¥–∞–º–∏</span>
                    </div>
                </div>
            </div>
            
            <button class="btn" id="backToResultsBtn">
                <i class="fas fa-history"></i>
                –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Ç–æ–≥–∏
            </button>
        </div>

        <!-- –°–í–ê–ô–ü –ü–û–î–°–ö–ê–ó–ö–ê -->
        <div class="swipe-hint" id="swipeHint">
            <i class="fas fa-arrows-alt-h"></i> –°–≤–∞–π–ø –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
        </div>
    </div>

    <script>
        // =============================================
        // –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –ò –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï
        // =============================================
        const firebaseConfig = {
            apiKey: "AIzaSyCcxotG6DNpkUxTXplC4DURNe-S02otuc4",
            authDomain: "samdcoin-e65a5.firebaseapp.com",
            projectId: "samdcoin-e65a5",
            storageBucket: "samdcoin-e65a5.firebasestorage.app",
            messagingSenderId: "30873122562",
            appId: "1:30873122562:web:5243417cc6ebc5abe4341b",
            measurementId: "G-BBPFLK9DMS"
        };

        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let currentUser = null;
        let allUsers = [];
        let globalStats = null;
        let currentSlide = 1;
        const totalSlides = 7;
        const season2Date = new Date('2025-12-19T17:00:00').getTime();
        let isInitialized = false;

        // =============================================
        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
        // =============================================
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...');
            
            try {
                // 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Firebase
                await initFirebase();
                
                // 2. –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram
                const telegramUser = await getTelegramUser();
                if (!telegramUser) {
                    showError('–¢—Ä–µ–±—É–µ—Ç—Å—è Telegram –¥–ª—è –≤—Ö–æ–¥–∞');
                    return;
                }
                
                // 3. –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Firestore
                currentUser = await findUserInFirestore(telegramUser);
                if (!currentUser) {
                    showError('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω');
                    return;
                }
                
                console.log('‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–π–¥–µ–Ω:', currentUser.id);
                
                // 4. –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                allUsers = await loadAllUsers();
                console.log('‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:', allUsers.length);
                
                // 5. –†–∞—Å—á–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
                globalStats = calculateGlobalStats(allUsers);
                
                // 6. –†–∞—Å—á–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                const userRank = calculateUserRank(currentUser, allUsers);
                
                // 7. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
                updateUI(currentUser, globalStats, userRank);
                
                // 8. –ü–æ–∫–∞–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
                setTimeout(() => {
                    document.getElementById('loadingScreen').style.opacity = '0';
                    setTimeout(() => {
                        document.getElementById('loadingScreen').style.display = 'none';
                        document.getElementById('appContainer').classList.add('show');
                    }, 300);
                }, 500);
                
                isInitialized = true;
                
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:', error);
                showError('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.');
            }
        });

        // =============================================
        // FIREBASE –§–£–ù–ö–¶–ò–ò
        // =============================================
        async function initFirebase() {
            try {
                firebase.initializeApp(firebaseConfig);
                window.db = firebase.firestore();
                console.log('‚úÖ Firebase –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ Firebase:', error);
                throw error;
            }
        }

        async function getTelegramUser() {
            const tg = window.Telegram?.WebApp;
            if (tg) {
                tg.expand();
                tg.ready();
                return tg.initDataUnsafe?.user;
            }
            return null;
        }

        async function findUserInFirestore(telegramUser) {
            const searchFields = [
                { field: 'telegramId', value: telegramUser.id.toString() },
                { field: 'telegram_id', value: telegramUser.id.toString() },
                { field: 'userId', value: telegramUser.id.toString() }
            ];
            
            if (telegramUser.username) {
                searchFields.push({ field: 'username', value: telegramUser.username });
            }
            
            for (const query of searchFields) {
                try {
                    const snapshot = await db.collection('users')
                        .where(query.field, '==', query.value)
                        .limit(1)
                        .get();
                    
                    if (!snapshot.empty) {
                        const doc = snapshot.docs[0];
                        const data = doc.data();
                        return {
                            id: doc.id,
                            name: telegramUser.first_name || '–ò–≥—Ä–æ–∫',
                            username: telegramUser.username,
                            coins: parseInt(data.coins || data.samd || 0),
                            tickets: parseInt(data.tickets || 0),
                            nfts: data.nfts || [],
                            upgrades: data.upgrades || []
                        };
                    }
                } catch (error) {
                    console.log(`–ü–æ–∏—Å–∫ –ø–æ ${query.field} –ø—Ä–æ–ø—É—â–µ–Ω`);
                }
            }
            
            return null;
        }

        async function loadAllUsers() {
            try {
                const snapshot = await db.collection('users').get();
                const users = [];
                
                snapshot.forEach(doc => {
                    const data = doc.data();
                    users.push({
                        id: doc.id,
                        coins: parseInt(data.coins || data.samd || 0),
                        tickets: parseInt(data.tickets || 0),
                        nfts: data.nfts || [],
                        username: data.username || data.telegramData?.username || 'user'
                    });
                });
                
                return users;
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:', error);
                return [];
            }
        }

        function calculateGlobalStats(users) {
            if (users.length === 0) {
                return {
                    totalCoins: 0,
                    totalTickets: 0,
                    totalNFTs: 0,
                    totalPlayers: 0,
                    avgCoins: 0,
                    avgTickets: 0,
                    avgNFTs: 0,
                    maxCoins: 0,
                    topPlayer: '-'
                };
            }
            
            let totalCoins = 0;
            let totalTickets = 0;
            let totalNFTs = 0;
            let maxCoins = 0;
            let topPlayer = '-';
            
            users.forEach(user => {
                totalCoins += user.coins || 0;
                totalTickets += user.tickets || 0;
                totalNFTs += (user.nfts || []).length;
                
                if (user.coins > maxCoins) {
                    maxCoins = user.coins;
                    topPlayer = user.username;
                }
            });
            
            return {
                totalCoins,
                totalTickets,
                totalNFTs,
                totalPlayers: users.length,
                avgCoins: Math.round(totalCoins / users.length),
                avgTickets: Math.round(totalTickets / users.length),
                avgNFTs: Math.round(totalNFTs / users.length),
                maxCoins,
                topPlayer
            };
        }

        function calculateUserRank(user, allUsers) {
            const sortedUsers = [...allUsers].sort((a, b) => (b.coins || 0) - (a.coins || 0));
            const rank = sortedUsers.findIndex(u => u.id === user.id) + 1;
            return rank || allUsers.length + 1;
        }

        // =============================================
        // UI –§–£–ù–ö–¶–ò–ò
        // =============================================
        function updateUI(user, stats, userRank) {
            if (!user || !stats) return;
            
            // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Å–µ–ª
            function format(num) {
                if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
                if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
                return num.toString();
            }
            
            // –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            document.getElementById('userCoins').textContent = format(user.coins);
            document.getElementById('userTickets').textContent = format(user.tickets);
            document.getElementById('userNFTs').textContent = format(user.nfts.length);
            
            // –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
            document.getElementById('totalCoins').textContent = format(stats.totalCoins);
            document.getElementById('totalTickets').textContent = format(stats.totalTickets);
            document.getElementById('totalNFTs').textContent = format(stats.totalNFTs);
            document.getElementById('totalPlayers').textContent = format(stats.totalPlayers);
            
            // –°—Ä–µ–¥–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
            document.getElementById('avgCoins').textContent = format(stats.avgCoins);
            document.getElementById('avgTickets').textContent = format(stats.avgTickets);
            document.getElementById('avgNFTs').textContent = format(stats.avgNFTs);
            
            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
            document.getElementById('maxCoins').textContent = format(stats.maxCoins);
            document.getElementById('topPlayer').textContent = '@' + stats.topPlayer;
            document.getElementById('userRank').textContent = '#' + userRank;
            
            // –†–∞—Å—á–µ—Ç –æ—Ç–∫—Ä—ã—Ç—ã—Ö –∫–µ–π—Å–æ–≤ (–ø—Ä–∏–º–µ—Ä: 10 –±–∏–ª–µ—Ç–æ–≤ –Ω–∞ –∫–µ–π—Å)
            const casesOpened = Math.floor(user.tickets / 10);
            document.getElementById('casesOpened').textContent = casesOpened;
            
            // –°—Ç–æ–∏–º–æ—Å—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏–∏ NFT
            const nftValue = calculateNFTValue(user.nfts);
            document.getElementById('collectionValue').textContent = format(nftValue);
            
            // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
            const userInfo = user.username ? `@${user.username}` : '–ò–≥—Ä–æ–∫';
            document.getElementById('userInfo').textContent = userInfo;
            
            // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
            const performance = `–í —Ç–æ–ø ${Math.round((userRank / stats.totalPlayers) * 100)}% –∏–≥—Ä–æ–∫–æ–≤`;
            document.getElementById('performanceStats').textContent = performance;
            
            // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ NFT
            displayNFTs(user.nfts);
            
            // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–¥–∫–æ—Å—Ç–∏ NFT
            updateRarityStats(user.nfts);
        }

        function calculateNFTValue(nfts) {
            if (!Array.isArray(nfts)) return 0;
            return nfts.reduce((sum, nft) => sum + (parseInt(nft.price) || 0), 0);
        }

        function displayNFTs(nfts) {
            const container = document.getElementById('nftGrid');
            container.innerHTML = '';
            
            if (!nfts || nfts.length === 0) {
                container.innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: 40px; color: #8b9bb5;">
                        <i class="fas fa-gem" style="font-size: 48px; margin-bottom: 20px; opacity: 0.3;"></i>
                        <div style="font-size: 16px;">NFT –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>
                    </div>
                `;
                return;
            }
            
            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
            const displayNFTs = nfts.slice(0, 12);
            
            displayNFTs.forEach(nft => {
                const rarityColor = getRarityColor(nft.rarity);
                const item = document.createElement('div');
                item.className = 'nft-item';
                item.innerHTML = `
                    <img class="nft-image" 
                         src="${nft.imageUrl || getPlaceholder(nft.rarity)}" 
                         alt="${nft.name || 'NFT'}"
                         onerror="this.src='${getPlaceholder(nft.rarity)}'">
                    <div class="nft-name">${nft.name || 'NFT'}</div>
                    <div class="nft-rarity" style="color: ${rarityColor}">
                        ${getRarityName(nft.rarity || 'common')}
                    </div>
                `;
                container.appendChild(item);
            });
        }

        function updateRarityStats(nfts) {
            if (!Array.isArray(nfts)) {
                document.getElementById('rarityStats').textContent = '–ù–µ—Ç NFT';
                return;
            }
            
            const rarityCount = { common: 0, rare: 0, epic: 0, legendary: 0 };
            
            nfts.forEach(nft => {
                const rarity = (nft.rarity || 'common').toLowerCase();
                if (rarityCount.hasOwnProperty(rarity)) {
                    rarityCount[rarity]++;
                } else {
                    rarityCount.common++;
                }
            });
            
            const statsText = `–õ–µ–≥–µ–Ω–¥: ${rarityCount.legendary} | –≠–ø–∏—á: ${rarityCount.epic} | –†–µ–¥–∫–∏—Ö: ${rarityCount.rare} | –û–±—ã—á–Ω: ${rarityCount.common}`;
            document.getElementById('rarityStats').textContent = statsText;
        }

        function getRarityColor(rarity) {
            switch(rarity) {
                case 'legendary': return '#ffbe0b';
                case 'epic': return '#8338ec';
                case 'rare': return '#3a86ff';
                default: return '#8b9bb5';
            }
        }

        function getRarityName(rarity) {
            const names = {
                common: '–û–±—ã—á–Ω–∞—è',
                rare: '–†–µ–¥–∫–∞—è',
                epic: '–≠–ø–∏—á–µ—Å–∫–∞—è',
                legendary: '–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è'
            };
            return names[rarity] || rarity;
        }

        function getPlaceholder(rarity) {
            const colors = {
                common: '8b9bb5',
                rare: '3a86ff',
                epic: '8338ec',
                legendary: 'ffbe0b'
            };
            const color = colors[rarity] || colors.common;
            return `https://api.dicebear.com/7.x/shapes/svg?seed=${rarity}&backgroundColor=${color}`;
        }

        // =============================================
        // –ù–ê–í–ò–ì–ê–¶–ò–Ø
        // =============================================
        function showSlide(slideNumber) {
            if (slideNumber < 1 || slideNumber > totalSlides + 1) return;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
            const progress = ((slideNumber - 1) / totalSlides) * 100;
            document.getElementById('slideProgress').style.width = `${progress}%`;
            
            // –°–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö —Å–ª–∞–π–¥–æ–≤
            document.querySelectorAll('.slide').forEach(slide => {
                slide.classList.remove('active', 'prev');
            });
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –Ω—É–∂–Ω—ã–π —Å–ª–∞–π–¥
            const targetSlide = document.getElementById(`slide${slideNumber}`);
            if (targetSlide) {
                targetSlide.classList.add('active');
            } else if (slideNumber === totalSlides + 1) {
                document.getElementById('season2Screen').classList.add('active');
            }
            
            currentSlide = slideNumber;
            
            // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –≤–µ—Ä—Ö—É
            window.scrollTo(0, 0);
        }

        function nextSlide() {
            if (currentSlide < totalSlides) {
                showSlide(currentSlide + 1);
            } else if (currentSlide === totalSlides) {
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ—Å–º–æ—Ç—Ä –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–µ–∑–æ–Ω—É 2
                localStorage.setItem('samdgame_results_viewed', 'true');
                showSlide(totalSlides + 1);
            }
        }

        function prevSlide() {
            if (currentSlide > 1) {
                showSlide(currentSlide - 1);
            }
        }

        function showSeason2() {
            showSlide(totalSlides + 1);
        }

        function showResults() {
            showSlide(1);
        }

        // =============================================
        // –¢–ê–ô–ú–ï–†
        // =============================================
        function updateCountdown() {
            const now = Date.now();
            const diff = season2Date - now;
            
            if (diff > 0) {
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                
                document.getElementById('days').textContent = days.toString().padStart(2, '0');
                document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
                document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
                document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
            } else {
                document.querySelector('.countdown-title').textContent = '–°–µ–∑–æ–Ω –Ω–∞—á–∞–ª—Å—è!';
                document.querySelector('.countdown-timer').innerHTML = `
                    <div style="color: #38b000; font-size: 24px; font-weight: bold;">
                        üéâ –ù–∞—á–∏–Ω–∞–µ–º! üéâ
                    </div>
                `;
            }
        }

        // =============================================
        // –°–í–ê–ô–ü–´
        // =============================================
        function initSwipe() {
            let startX = 0;
            let startY = 0;
            
            document.addEventListener('touchstart', (e) => {
                startX = e.touches[0].clientX;
                startY = e.touches[0].clientY;
            }, { passive: true });
            
            document.addEventListener('touchend', (e) => {
                if (!startX || !startY) return;
                
                const endX = e.changedTouches[0].clientX;
                const endY = e.changedTouches[0].clientY;
                
                const diffX = startX - endX;
                const diffY = Math.abs(startY - endY);
                
                // –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–∏—Å—Ç–∞–Ω—Ü–∏—è –¥–ª—è —Å–≤–∞–π–ø–∞
                const minSwipe = 50;
                
                // –ï—Å–ª–∏ —Å–≤–∞–π–ø –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π –∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª–∏–Ω–Ω—ã–π
                if (Math.abs(diffX) > minSwipe && Math.abs(diffX) > diffY) {
                    if (diffX > 0) {
                        // –°–≤–∞–π–ø –≤–ª–µ–≤–æ - —Å–ª–µ–¥—É—é—â–∏–π —Å–ª–∞–π–¥
                        nextSlide();
                    } else {
                        // –°–≤–∞–π–ø –≤–ø—Ä–∞–≤–æ - –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Å–ª–∞–π–¥
                        prevSlide();
                    }
                }
                
                startX = 0;
                startY = 0;
            }, { passive: true });
        }

        // =============================================
        // –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –°–û–ë–´–¢–ò–ô
        // =============================================
        function initEventListeners() {
            // –ö–Ω–æ–ø–∫–∞ –Ω–∞—á–∞–ª–∞
            document.getElementById('startBtn').addEventListener('click', nextSlide);
            
            // –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Å–µ–∑–æ–Ω—É 2
            document.getElementById('season2Btn').addEventListener('click', function() {
                localStorage.setItem('samdgame_results_viewed', 'true');
                showSeason2();
            });
            
            // –ö–Ω–æ–ø–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ –∏—Ç–æ–≥–∞–º
            document.getElementById('backToResultsBtn').addEventListener('click', showResults);
            
            // –ö–ª–∞–≤–∏—à–∏
            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowRight' || e.key === ' ') {
                    nextSlide();
                } else if (e.key === 'ArrowLeft') {
                    prevSlide();
                }
            });
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–≤–∞–π–ø–æ–≤
            initSwipe();
            
            // –ó–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–∞
            setInterval(updateCountdown, 1000);
            updateCountdown();
        }

        // =============================================
        // –û–®–ò–ë–ö–ò
        // =============================================
        function showError(message) {
            document.getElementById('loadingText').innerHTML = `
                <div style="color: #ff4757; text-align: center;">
                    <div style="font-size: 20px; margin-bottom: 10px;">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div style="margin-bottom: 20px;">${message}</div>
                    <button onclick="location.reload()" style="
                        background: #ff4757;
                        color: white;
                        border: none;
                        padding: 12px 24px;
                        border-radius: 25px;
                        font-size: 16px;
                        cursor: pointer;
                    ">
                        <i class="fas fa-redo"></i> –û–±–Ω–æ–≤–∏—Ç—å
                    </button>
                </div>
            `;
        }

        // =============================================
        // –ó–ê–ü–£–°–ö –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
        // =============================================
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
        initEventListeners();
        
        // –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ –º–æ–±–∏–ª—å–Ω—ã–µ
        function handleResize() {
            const vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--vh', `${vh}px`);
        }
        
        window.addEventListener('resize', handleResize);
        handleResize();
        
        // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω—é
        document.addEventListener('contextmenu', (e) => {
            e.preventDefault();
        });
        
        console.log('‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ');
    </script>
</body>
</html>